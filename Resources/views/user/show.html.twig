{% extends 'base.html.twig' %}

{% block menu %}
    <div class="collapse navbar-collapse" id="navbarResponsive">
        <a class="navbar-brand">Witaj, {{ app.user.username }}!</a>
        <ul class="navbar-nav ml-auto">
            <li class="nav-item">
                <a class="nav-link" href="{{ path('recipe_index') }}">Lista przepisów</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{{ path('ingredient_index') }}">Składniki</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{{ path('recipe_new') }}">Nowy przepis</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{{ path('security_logout') }}">Wyloguj się</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{{ path('user_index') }}">Użytkownicy</a>
            </li>
        </ul>
    </div>
{% endblock %}

{% block header %}
    <h1>Panel administracyjny</h1>
    <h2>użytkownicy</h2>
{% endblock %}

{% block body %}
    <a href="{{ path('user_index') }}">Powrót do listy użytkowników</a>
    <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
                <div class="post-preview">
                    <a href="{{ path('user_show', { 'id': user.name }) }}">
                        <h2 class="post-title">
                            {{ user.name }}
                        </h2>
                    </a>
                </div>
            <br>
            <h3>Edycja danych użytkownika:</h3>
            {{ form_start(edit_form) }}
            {{ form_widget(edit_form) }}
            <input type="submit" value="Potwierdź zmiany" />
            {{ form_end(edit_form) }}
            <br><br>
                <table>
                   <tbody>
                   <h4>Wpisy użytkownika</h4>
                   {% for recipe in user.recipes %}
                       <tr>
                           <td>{{ recipe.title }}</td>
                       </tr>
                       {{ form_start(delete_form, {'attr': {'onclick': 'return confirm("Czy na pewno chcesz usunąć?")'}}) }}
                       <input type="submit" value="Usuń wpis">
                       {{ form_end(delete_form) }}
                   {% endfor %}
                   </tbody>
               </table>

                {{ form_start(delete_form, {'attr': {'onclick': 'return confirm("Czy na pewno chcesz usunąć?")'}}) }}
                <input type="submit" value="Usuń użytkownika">
                {{ form_end(delete_form) }}
                <hr>
            <hr>
        </div>
    </div>
{% endblock %}
